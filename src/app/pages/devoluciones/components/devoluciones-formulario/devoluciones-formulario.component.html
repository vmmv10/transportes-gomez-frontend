<div class="card flex flex-column gap-2 py-1">
    <p-breadcrumb class="max-w-full" [model]="breadcrumb" />
</div>
<div class="flex flex-column gap-3 card">
    <div class="flex md:flex-row flex-column gap-2" *ngIf="!devolucion.id">
        <app-ordenes-servicios-modal-select [enRuta]="false" (ordenesServiciosSeleccionadosChange)="ordenesServiciosSeleccionadosChange($event)" [(ordenesServiciosSeleccionados)]="ordenesServicio" class="w-12"></app-ordenes-servicios-modal-select>
    </div>
    <div class="flex flex-column gap-2" *ngIf="devolucion.ordenServicio">
        <table class="table-auto w-full border border-gray-300 border-round-xl">
            <tbody class="border-round-xl">
                <tr>
                    <th class="text-left px-4 py-2 bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-600 w-1/3">
                        Número de Orden
                    </th>
                    <td class="px-4 py-2 border-b border-gray-300 text-right">
                        <span class="text-sm font-semibold">{{ devolucion.ordenServicio.id }}</span>
                    </td>
                </tr>
                <tr *ngIf="devolucion.ordenServicio.escuela">
                    <th class="text-left px-4 py-2 bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-600 w-1/3">
                        Escuela
                    </th>
                    <td class="px-4 py-2 border-b border-gray-300 text-right">
                        <span class="text-sm font-semibold">{{ devolucion.ordenServicio.escuela.nombre }}</span>
                    </td>
                </tr>
                <tr *ngIf="devolucion.ordenServicio.documento">
                    <th class="text-left px-4 py-2 bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-600 w-1/3">
                        Documento
                    </th>
                    <td class="px-4 py-2 border-b border-gray-300 text-right">
                        <span class="text-sm font-semibold">{{ devolucion.ordenServicio.documento.numero }}</span>
                    </td>
                </tr>
                <tr *ngIf="devolucion.ordenServicio.documento.tipo">
                    <th class="text-left px-4 py-2 bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-600 w-1/3">
                        Documento Tipo
                    </th>
                    <td class="px-4 py-2 border-b border-gray-300 text-right">
                        <span class="text-sm font-semibold">{{ devolucion.ordenServicio.documento.tipo.nombre }}</span>
                    </td>
                </tr>
            </tbody>
        </table>
        <button *ngIf="!devolucion.id" pButton [fluid]="true" label="Comenzar" severity="info" class="w-12" (click)="comenzar()"></button>
    </div>
</div>
<div class="flex flex-column gap-3 card" *ngIf="devolucion.id">
    <input [fluid]="true" pInputText [pAutoFocus]="focusArticulo" id="articulo" [(ngModel)]="articuloBuscar" placeholder="Ingrese codigo" class="w-12" />
    <p-table showGridlines [responsive]="true" [value]="devolucion.detalles">
        <ng-template #header>
            <tr>
                <th class="text-center">Detalle</th>
                <th class="text-center">Cantidad</th>
                <th class="text-center">
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-item>
            <tr>
                <td class="text-center">
                    <div class="flex flex-column gap-1">
                        <span class="text-sm font-semibold">{{ item.articulo.codigo }}</span>
                        <span class="text-xs text-gray-500">{{ item.articulo.nombre }}</span>
                    </div>
                </td>
                <td class="text-center">
                    <p-input-number [(ngModel)]="item.cantidad" [showButtons]="true" [min]="1" [max]="1000"></p-input-number>
                </td>
                <td class="text-center">
                </td>
            </tr>
        </ng-template>
        <ng-template #emptymessage>
            <tr>
                <td colspan="4" class="text-center">No se han agregados artículos.</td>
            </tr>
        </ng-template>
    </p-table>
</div>
<app-modal-loading [visible]="loading" ></app-modal-loading>
<p-toast />